<% tapester = params[:email] ? Tapester.find_by_email(params[:email]) : nil -%>
<h2>Sign in<%= tapester ? ", #{tapester.name}" : "" %></h2>

<%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
<% if tapester -%>
  <%= f.hidden_field :email, :value => tapester.email %>
<% else -%>
  <p><%= f.label :email %><br />
  <%= f.text_field :email %></p>
<% end -%>

  <p><%= f.label :password %><br />
  <%= f.password_field :password %></p>

  <% if devise_mapping.rememberable? -%>
    <p><%= f.check_box :remember_me %> <%= f.label :remember_me %></p>
  <% end -%>

  <p><%= f.submit "Sign in" %></p>
<% end %>

<%= render :partial => "devise/shared/links" %>
